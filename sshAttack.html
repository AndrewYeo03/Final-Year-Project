<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>SSH Attack - TARUMT Cyber Range</title>
        <link href="https://cdn.jsdelivr.net/npm/simple-datatables@7.1.2/dist/style.min.css" rel="stylesheet" />
        <link href="css/styles.css" rel="stylesheet" />
        <script src="https://use.fontawesome.com/releases/v6.3.0/js/all.js" crossorigin="anonymous"></script>
        <style>
            .top-nav {
                background-color: #f8f9fa;
                padding: 10px;
                border-bottom: 1px solid #ddd;
                display: flex;
                justify-content: space-between;
                align-items: center;
            }

            .top-nav .open-button {
                font-size: 18px;
                padding: 10px 20px;
                cursor: pointer;
                background-color: #f44336;
                color: white;
                border: none;
                border-radius: 5px;
            }

            .top-nav .open-button:hover {
                background-color: #c0392b;
            }

            /* Overlay */
            .overlay {
                display: none;
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background-color: rgba(0, 0, 0, 0.5);
                z-index: 1050;
            }

            .hint-box {
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background-color: rgba(211, 211, 211, 0.95);
                padding: 20px;
                width: 80%;
                max-height: 70%;
                overflow-y: auto;
                border-radius: 10px;
                box-shadow: 0px 0px 15px rgba(0, 0, 0, 0.5);
                display: none;
                z-index: 1100;
            }

            .close-button {
                position: absolute;
                top: 10px;
                right: 20px;
                font-size: 24px;
                background: none;
                border: none;
                cursor: pointer;
            }

            .hint-content {
                font-family: 'Courier New', Courier, monospace;
                text-align: justify;
                padding-right: 10px;
            }

            pre {
                background-color: #f4f4f4;
                padding: 10px;
                border-radius: 5px;
                overflow-x: auto;
            }

            /* Nav Menu */
            .nav-menu {
                display: flex;
                justify-content: flex-start;
                align-items: start;
                margin: 15px 0px;
                font-size: 10px;
            }

            .nav-menu a {
                display: inline-block;
                padding: 10px 15px;
                margin: 0 5px;
                text-decoration: none;
                color: white;
                background-color: red;
                border-radius: 4px;
                cursor: pointer;
            }

            .nav-menu a.submitted {
                background-color: green;
            }

            .nav-menu a i {
                font-size: 12px;
            }

            /* Main Content */
            .main-content {
                background-color: #f8f9fa;
                border: 2px solid #ccc;
                padding: 20px;
                border-radius: 10px;
                margin-bottom: 20px;
                box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            }

            /* Learning Objectives */
            .learning-objectives h2 {
                color: #007bff;
                margin-bottom: 15px;
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
            }

            .learning-objectives ul {
                list-style-type: disc;
                padding-left: 20px;
            }

            .learning-objectives li {
                margin-bottom: 10px;
                font-size: 16px;
                line-height: 1.6;
                font-family: 'Arial', sans-serif;
            }

            /* Question */
            .question h2 {
                color: #28a745;
                margin-top: 30px;
                margin-bottom: 15px;
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
            }

            .question p {
                font-size: 16px;
                line-height: 1.6;
                font-family: 'Arial', sans-serif;
                text-align: justify;
                padding-left: 20px;
            }

            /* Submission Area */
            .flag-container {
                padding: 20px;
                border: 2px solid #FF0000;
                border-radius: 5px;
                width: 100%;
                max-width: 100%;
                box-sizing: border-box;
                background-color: rgba(211, 211, 211, 0.7);
            }

            .flag-title {
                color: #000;
                font-size: 25px;
                margin-bottom: 15px;
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                text-align: start;
                text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.7);
            }

            .feedback {
                margin-top: 10px;
                padding: 10px;
                font-size: 14px;
            }

            .feedback.correct {
                color: green;
            }

            .feedback.incorrect {
                color: red;
            }

            #flagInput {
                width: 100%;
                padding: 8px;
                box-sizing: border-box; /* Ensure padding doesn't affect total width */
            }

            #submitButton {
                font-size: 12px;
                margin-top: 10px;
                padding: 8px 16px;
                border-radius: 5px
            }

            /* Side Navigation Bar */
            .sb-sidenav {
                z-index: 1000; /* Default z-index of the side navigation bar */
            }
        </style>
    </head>
    <body class="sb-nav-fixed">
        <nav class="sb-topnav navbar navbar-expand navbar-dark bg-dark">
            <!-- Navbar Brand-->
            <a class="navbar-brand ps-3" href="index.html">TARUMT Cyber Range</a>
            <!-- Sidebar Toggle-->
            <button class="btn btn-link btn-sm order-1 order-lg-0 me-4 me-lg-0" id="sidebarToggle" href="#!"><i class="fas fa-bars"></i></button>
            <!-- Navbar Search-->
            <form class="d-none d-md-inline-block form-inline ms-auto me-0 me-md-3 my-2 my-md-0">
                <div class="input-group">
                    <input class="form-control" type="text" placeholder="Search for..." aria-label="Search for..." aria-describedby="btnNavbarSearch" />
                    <button class="btn btn-primary" id="btnNavbarSearch" type="button"><i class="fas fa-search"></i></button>
                </div>
            </form>
            <!-- Navbar-->
            <ul class="navbar-nav ms-auto ms-md-0 me-3 me-lg-4">
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" id="navbarDropdown" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false"><i class="fas fa-user fa-fw"></i></a>
                    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdown">
                        <li><a class="dropdown-item" href="#!">Settings</a></li>
                        <li><a class="dropdown-item" href="#!">Activity Log</a></li>
                        <li><hr class="dropdown-divider" /></li>
                        <li><a class="dropdown-item" href="#!">Logout</a></li>
                    </ul>
                </li>
            </ul>
        </nav>
        <div id="layoutSidenav">
            <div id="layoutSidenav_nav">
                <nav class="sb-sidenav accordion sb-sidenav-dark" id="sidenavAccordion">
                    <div class="sb-sidenav-menu">
                        <div class="nav">
                            <div class="sb-sidenav-menu-heading">Core</div>
                            <a class="nav-link" href="index.html">
                                <div class="sb-nav-link-icon"><i class="fas fa-tachometer-alt"></i></div>
                                Dashboard
                            </a>
                            <div class="sb-sidenav-menu-heading">Interface</div>
                            <a class="nav-link collapsed" href="#" data-bs-toggle="collapse" data-bs-target="#collapseStudents" aria-expanded="false" aria-controls="collapseLayouts">
                                <div class="sb-nav-link-icon"><i class="fas fa-columns"></i></div>
                                Student
                                <div class="sb-sidenav-collapse-arrow"><i class="fas fa-angle-down"></i></div>
                            </a>
                            <div class="collapse" id="collapseStudents" aria-labelledby="headingOne" data-bs-parent="#sidenavAccordion">
                                <nav class="sb-sidenav-menu-nested nav">
                                    <a class="nav-link" href="#">Member Of Groups</a>
                                    <a class="nav-link" href="allScenario.html">Scenarios</a>
                                </nav>
                            </div>
                        </div>
                    </div>
                    <div class="sb-sidenav-footer">
                        <div class="small">Logged in as:</div>
                        Andrew Yeo
                    </div>
                </nav>
            </div>
            <div id="layoutSidenav_content">
                <main>
                    <div class="container-fluid px-4">
                        <h1 class="mt-4">SSH Attack</h1>
                        <ol class="breadcrumb mb-4">
                            <li class="breadcrumb-item active">SSH Attack</li>
                            <li class="breadcrumb-item active">Suggest Duration: 1 Hour</li>
                        </ol>
                        <!-- Top nav bar -->
                        <div class="top-nav">
                            <button id="openHintBox" class="open-button">Show Hints</button>
                        </div>
                        <!-- Overlay -->
                        <div id="overlay" class="overlay"></div>

                        <!-- Hint Box -->
                        <div id="hintBox" class="hint-box">
                            <button id="closeHintBox" class="close-button">&times;</button>
                            <div class="hint-content">
                                <p><strong>Use Nmap to Identify Targets:</strong></p>
                                <p>Start by scanning your network to identify which hosts have port 22 (SSH) open.<br>
                                For example, use the following command to discover active hosts with SSH open:</p>
                                <pre><code>nmap 192.168.43.0/24 -p 22 --open</code></pre>

                                <p><strong>Prepare Username and Password Lists:</strong></p>
                                <p>Create your lists of potential usernames and passwords to use for brute force attacks.<br>
                                Example commands:</p>
                                <pre><code>cat > users.txt</code></pre>
                                <pre><code>cat > passwords.txt</code></pre>

                                <p><strong>Set Up the Backdoor with SSH Key Authentication:</strong></p>
                                <p>After gaining access, copy your public key to the target machine to establish persistent access. Since SSH supports various authentication mechanisms, we'll focus on key-based authentication.<br>
                                Generate your SSH key pair on the attacker machine:</p>
                                <pre><code>ssh-keygen -t rsa -b 2048 -f ~/.ssh/id_rsa</code></pre>

                                <p>View your public key:</p>
                                <pre><code>cat ~/.ssh/id_rsa.pub</code></pre>

                                <p>Copy this public key for use on the target machine.</p>
                                <p><strong>Create .ssh Directory on the Target and Paste Your Public Key:</strong></p>
                                <p>On the target machine, create the necessary directories and paste your public key.<br>
                                Command to create the directory:</p>
                                <pre><code>mkdir -p ~/.ssh</code></pre>
                                <p>Remember to change the directory and file permissions to ensure authentication succeeds:</p>
                                <pre><code>chmod 700 ~/.ssh</code></pre>
                                <p>Paste your public key in the victimâ€™s machine in <code>~/.ssh/authorized_keys</code>:</p>
                                <pre><code>echo "&lt;PasteYourPublicKeyHere&gt;" >> ~/.ssh/authorized_keys</code></pre>

                                <p><strong>SSH Into the Target Without a Password:</strong></p>
                                <p>With your public key in place, you should be able to SSH into the target machine without needing a password from your attacker machine.<br>
                                For example, you can SSH into the target machine by:</p>
                                <pre><code>ssh -i ~/.ssh/id_rsa TargetHostName@TargetHostIP</code></pre>
                                <p>or</p>
                                <pre><code>ssh TargetHostName@TargetHostIP</code></pre>
                            </div>
                        </div>

                        <!-- Nav Menu -->
                        <div class="nav-menu">
                            <a href="#" class="back-button"><i class="fas fa-arrow-left"></i></a>
                            <a href="#" class="nav-link" data-number="1">1</a>
                            <a href="#" class="nav-link" data-number="2">2</a>
                            <a href="#" class="next-button"><i class="fas fa-arrow-right"></i></a>
                        </div>

                        <!-- Main Content/ Description of Scenario -->
                        <div class="main-content">
                            <div class="learning-objectives">
                                <h2>Learning Objectives</h2>
                                <ul>
                                    <li>Understand the basics of SSH brute force attacks.</li>
                                    <li>Gain experience with different SSH brute force tools like Metasploit, Hydra, Patator, and Medusa.</li>
                                    <li>Learn how to configure and execute both manual and automated SSH brute force attacks.</li>
                                    <li>Understand the implications of SSH vulnerabilities on system security.</li>
                                    <li>Learn how to establish persistence on a compromised system using SSH backdoors.</li>
                                </ul>
                            </div>

                            <div class="question">
                                <h2>Question</h2>
                                <p>In this exercise, you are required to conduct a brute force attack on an SSH server using manual methods. You will utilize tools such as Hydra and Metasploit to gain unauthorized access to the target machine. Once access is obtained, you must establish persistence by setting up SSH key-based authentication. The goal is to understand the process of brute forcing, gain access, and secure it through public key authentication, simulating a real-world attack scenario.</p>
                            </div>
                        </div>


                        <!-- Submission Flag Area-->
                        <div class="flag-container">
                            <h2 class="flag-title">Submission of flag</h2>
                            <label for="flagInput1">Enter Username:</label>
                            <input type="text" id="flagInput1" placeholder="Enter username" style="width: 100%; padding: 8px;">
                            <label for="flagInput2">Enter Password:</label>
                            <input type="text" id="flagInput2" placeholder="Enter password" style="width: 100%; padding: 8px;">
                            <button id="submitButton" style="margin-top: 10px; padding: 8px 16px;">Submit</button>
                            <div id="feedback" class="feedback"></div>
                        </div>

                    </div>
                </main>
                <footer class="py-4 bg-light mt-auto">
                    <div class="container-fluid px-4">
                        <div class="d-flex align-items-center justify-content-between small">
                            <div class="text-muted">Copyright &copy; TARUMT Cyber Range 2023</div>
                            <div>
                                <a href="#">Privacy Policy</a>
                                &middot;
                                <a href="#">Terms &amp; Conditions</a>
                            </div>
                        </div>
                    </div>
                </footer>
            </div>
        </div>

        <script>
            document.getElementById('openHintBox').addEventListener('click', function() {
                document.getElementById('hintBox').style.display = 'block';
                document.getElementById('overlay').style.display = 'block';
                document.getElementById('layoutSidenav_nav').style.zIndex = '900'; // Temporarily lower z-index of sidebar
            });

            document.getElementById('closeHintBox').addEventListener('click', function() {
                document.getElementById('hintBox').style.display = 'none';
                document.getElementById('overlay').style.display = 'none';
                document.getElementById('layoutSidenav_nav').style.zIndex = '1000'; // Restore z-index of sidebar
            });


            // Example of how to change background color after submitting
            document.querySelectorAll('.nav-link').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    this.classList.add('submitted');
                });
            });

            //Submission of flag
            const correctUsername = "yiyangtan0519"; // Replace this with linking to database in future
            const correctPassword = "abc123"; //Replace this with linking to database in future

            document.getElementById('submitButton').addEventListener('click', function() {
                const userFlag1 = document.getElementById('flagInput1').value;
                const userFlag2 = document.getElementById('flagInput2').value;
                const feedback = document.getElementById('feedback');

                if (userFlag1 === correctUsername && userFlag2 === correctPassword) {
                    feedback.textContent = "Correct answer!";
                    feedback.className = "feedback correct";
                } else {
                    feedback.textContent = "Flag is incorrect. Please try again.";
                    feedback.className = "feedback incorrect";
                }
            });
        </script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
        <script src="js/scripts.js"></script>
    </body>
</html>
